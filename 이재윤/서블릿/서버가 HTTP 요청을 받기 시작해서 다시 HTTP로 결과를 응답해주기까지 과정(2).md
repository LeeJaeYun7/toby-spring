

```
Summary


4) 컨트롤러의 결과 리턴: 모델과 뷰
- 모델이 준비됐으면 다음은 뷰를 결정할 차례다
-> MVC의 모든 요소가 그렇듯이 뷰도 하나의 오브젝트다
-> 컨트롤러가 뷰 오브젝트를 직접 리턴할 수도 있지만, 보통은 뷰의 논리적인 이름을 리턴해주면
   DispatcherServlet의 전략인 뷰 리졸버가 이를 이용해 뷰 오브젝트를 생성해준다.
-> 대표적으로 사용되는 뷰는 JSP/JSTL 뷰다.
-> JSP 파일로 만들어진 뷰 템플릿과 JstlView 클래스로 만들어진 뷰 오브젝트가 결합해서
   최종적으로 사용자가 보게 될 HTML을 생성하는데, 이 경우 컨트롤러는 JstlView가 사용할 JSP 템플릿 파일의 이름을 리턴해줘야 한다
-> 뷰를 사용하는 전략과 방법도 매우 다양하기 때문에, 일단은 컨트롤러가 뷰에 대한 정보를 돌려준다는 사실만 기억해두고 넘어가자.

- 컨트롤러가 리턴해주는 정보는 결국 모델과 뷰 두 가지다.
-> 스프링에는 ModelAndView라는 이름의 오브젝트가 있는데, 이 ModelAndView가 DispatcherServlet이 최종적으로 어댑터를 통해 컨트롤러로부터
   돌려받는 오브젝트다
-> 이름 그대로 모델과 뷰, 두 가지 정보를 담고 있다.
-> 모델과 뷰를 넘기는 것으로 컨트롤러의 책임은 끝이다. 다시 작업은 DispatcherServlet으로 넘어간다.


5) DispatcherServlet의 뷰 호출과 (6) 모델 참조
- DispatcherServlet이 컨트롤러로부터 모델과 뷰를 받은 뒤에 진행하는 작업은, 뷰 오브젝트에게 모델을 전달해주고 클라이언트에게 돌려줄
  최종 결과물을 생성해달라고 요청하는 것이다.
-> 보통은 브라우저를 통해 사용자가 결과를 볼 테니 브라우저에서 나타날 HTML을 생성하는 일이 가장 흔한 뷰의 작업이다.
-> JSP를 이용해서 결과물을 만들어주는 JstlView는 컨트롤러가 돌려준 JSP 뷰 템플릿의 이름을 가져다 HTML을 생성하는데,
   그중에 동적으로 생성되도록 표시된 부분은 모델의 내용을 참고로 해서 내용을 채워준다.

- 예를 들어, 컨트롤러가 모델에 name이라는 이름으로 'Spring'이라는 값을 넣어뒀다면,
  JstlView는 JSP에서 다음과 같은 내용을 만나면 모델의 name에 해당하는 값을 가져와 ${name} 자리에 대신 넣어준다

<div> 이름 : ${name} </div>

- 모델의 내용을 참고로 해서 뷰가 작업한 최종 결과는 다음과 같이 될 것이다.
<div> 이름 : Spring </div>

- JSP를 사용하는 뷰 외에도 엑셀, PDF와 같은 파일 형태로 결과물을 만드는 뷰는 JSP 파일 같은 템플릿을 사용하는 대신 뷰 생성 기능을 가진
  뷰 오브젝트를 이용하기도 한다.
-> 또, 모델의 정보를 RSS, Atom이나 최근 많이 사용되는 JSON으로 생성해주는 뷰도 있다.
-> 모델은 같을지라도 어떤 뷰가 선택되느냐에 따라 다른 형태의 결과물이 만들어진다.
-> 기술적으로 보자면 뷰 작업을 통한 최종 결과물은 HttpServletResponse 오브젝트 안에 담긴다.


7) Http 응답 돌려주기
- 뷰 생성까지의 모든 작업을 마쳤으면 DispatcherServlet은 등록된 후처리기가 있는지 확인하고,
  있다면 후처리기에서 후속 작업을 진행한 뒤에 뷰가 만들어준 HttpServletResponse에 담긴 최종 결과를 서블릿 컨테이너에게 돌려준다.
-> 서블릿 컨테이너는 HttpServletResponse에 담긴 정보를 HTTP 응답으로 만들어 사용자의 브라우저나 클라이언트에게 전송하고 작업을 종료한다.

- 프론트 컨트롤러인 DispatcherServlet과 모델, 뷰, 컨트롤러가 사용자의 요청을 처리하는 이 과정은 꼭 기억해두자
-> 종이를 하나 가져와 그림 3-1의 그림을 그려보고 순서대로 각 작업 단계를 따라가면서 어떤 일이 일어나는지 직접 설명해보자
-> 이 과정이 명확하게 머릿속에 그려져 있지 않으면 스프링 MVC의 코드와 설정을 이해하기 힘들다.
-> 그러니 잠시 시간을 내서라도 위에서 설명한 내용은 최소한 기억해두고 다음으로 넘어가자.

- 스프링 MVC에서 진행되는 작업은 코드나 설정으로 바로 파악하기가 쉽지 않다.
-> 많은 부분이 MVC 프레임워크 내부에서 진행되고, 상당수의 작업은 선언적으로 지정되며,
   코드 똫나 컴포넌트화돼서 쪼개져 있기 때문이다.
-> 그런데 이런 작업 흐름은 이해하지도 못한 채로 샘플 코드만 가져다가 이리저리 고쳐가면서 사용하려고 하면
   오히려 개발 시간은 더 걸리고 고생만 할 뿐이다. 


Insight
- 스프링 MVC의 DispatcherServlet의 흐름을 이해하는 것이 중요하다. 

Application
- 스프링 MVC의 DispatcherServlet의 흐름 이해하고 뜯어보기 


```
